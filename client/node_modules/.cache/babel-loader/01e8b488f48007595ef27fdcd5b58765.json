{"ast":null,"code":"import apiPost from \"../../services/service\"; // @ is an alias to /src\n\nexport default {\n  data: () => ({\n    search: \"\",\n    dialog: false,\n    dialogEdit: false,\n    dialogAdd: false,\n    dialogDeleteAll: false,\n    itemsPerPage: 4,\n    images: [],\n    image: [],\n    imageAdd: [],\n    tab: null,\n    loading: false,\n    id: null,\n    item: null,\n    wedName: null\n  }),\n\n  async mounted() {\n    this.id = await this.$route.params.id;\n\n    try {\n      // Simple GET request using axios\n      await apiPost.getCard(this.id).then(async response => {\n        this.images = await response.data.images;\n        this.wedName = await response.data.name;\n      });\n    } catch (error) {\n      console.log(error.message);\n    }\n  },\n\n  methods: {\n    async deleteFotografija(item) {\n      try {\n        let formData = {\n          \"image\": item,\n          \"id\": this.id\n        };\n        await apiPost.deleteImage(formData).then(response => {\n          console.log(response.data);\n        });\n        await apiPost.getCard(this.id).then(async response => {\n          this.images = await response.data.images;\n        });\n        this.dialog = false;\n      } catch (error) {\n        console.log(error.message);\n      }\n    },\n\n    async deleteAllFotografija(id) {\n      try {\n        await apiPost.deleteImageAll(id).then(response => {\n          console.log(response.data);\n        });\n        await apiPost.getCard(this.id).then(async response => {\n          this.images = await response.data.images;\n        });\n      } catch (error) {\n        console.log(error.message);\n      }\n\n      this.dialogDeleteAll = false;\n    },\n\n    async editFotografija(id) {\n      try {\n        let formData = new FormData();\n\n        if (this.image) {\n          formData.append(\"image[]\", this.image);\n          console.log(formData);\n          console.log(this.image);\n          await apiPost.editImage(id, this.item, formData).then(response => {\n            console.log(response.data);\n          });\n          await apiPost.getCard(this.id).then(async response => {\n            this.images = await response.data.images;\n            this.dialogEdit = false;\n          });\n          this.image = [];\n          this.item = null;\n        }\n      } catch (error) {\n        console.log(error.message);\n      }\n    },\n\n    deleteItem(item) {\n      this.item = item;\n      this.dialog = true;\n    },\n\n    editItem(id, item) {\n      this.dialogEdit = true;\n      this.item = item;\n    },\n\n    async dodajFotografiju() {\n      this.loading = true;\n      let formData = new FormData();\n\n      try {\n        let files = this.imageAdd;\n        let filesLength = files.length;\n\n        for (var i = 0; i < filesLength; i++) {\n          formData.append(\"image[]\", files[i]);\n        }\n\n        formData.append(\"id\", this.id);\n\n        if (this.imageAdd) {\n          await apiPost.addImages(formData).then(async response => {\n            console.log(await response.data);\n          });\n          await apiPost.getCard(this.id).then(async response => {\n            this.images = await response.data.images;\n          });\n          this.dialogAdd = false;\n          this.imageAdd = [];\n          this.loading = false;\n        }\n      } catch (error) {\n        console.log(error.message);\n      }\n    },\n\n    reserve() {\n      this.loading = true;\n      setTimeout(() => this.loading = false, 2000);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6SA,6C,CACA;;AAEA;EACAA;IACAC,UADA;IAEAC,aAFA;IAGAC,iBAHA;IAIAC,gBAJA;IAKAC,sBALA;IAMAC,eANA;IAOAC,UAPA;IAQAC,SARA;IASAC,YATA;IAUAC,SAVA;IAWAC,cAXA;IAYAC,QAZA;IAaAC,UAbA;IAcAC;EAdA,EADA;;EAoBA;IAEA;;IACA;MACA;MACA;QACA;QACA;MACA,CAHA;IAKA,CAPA,CAOA;MACAC;IACA;EACA,CAjCA;;EAmCAC;IACA;MACA;QACA;UACA,aADA;UAEA;QAFA;QAIA,oCACAC,IADA,CACAC;UACAH;QACA,CAHA;QAIA;UACA;QACA,CAFA;QAGA;MAEA,CAdA,CAcA;QACAA;MAEA;IAIA,CAvBA;;IAwBA;MACA;QACA;UACAA;QACA,CAFA;QAGA,+BACAE,IADA,CACA;UACA;QAEA,CAJA;MAKA,CATA,CASA;QACAF;MAEA;;MACA;IACA,CAvCA;;IAwCA;MACA;QACA;;QACA;UACAI;UACAJ;UACAA;UACA,iDACAE,IADA,CACAC;YACAH;UACA,CAHA;UAIA;YACA;YACA;UAEA,CAJA;UAKA;UACA;QACA;MACA,CAlBA,CAkBA;QACAA;MACA;IACA,CA9DA;;IA+DAK;MACA;MACA;IACA,CAlEA;;IAmEAC;MAEA;MACA;IACA,CAvEA;;IAyEA;MAEA;MACA;;MACA;QACA;QACA;;QACA;UACAF;QAEA;;QACAA;;QAEA;UACA,kCACAF,IADA,CACA;YACAF;UACA,CAHA;UAIA,+BACAE,IADA,CACA;YACA;UAEA,CAJA;UAKA;UACA;UACA;QACA;MAEA,CAxBA,CAwBA;QACAF;MACA;IAEA,CAzGA;;IA2GAO;MACA;MACAC;IACA;;EA9GA;AAnCA","names":["data","search","dialog","dialogEdit","dialogAdd","dialogDeleteAll","itemsPerPage","images","image","imageAdd","tab","loading","id","item","wedName","console","methods","then","response","formData","deleteItem","editItem","reserve","setTimeout"],"sourceRoot":"src/components/wed-stories","sources":["WedStoriesDetails.vue"],"sourcesContent":["<template>\n<div >\n  <router-link to=\"/wed-albums\" style=\"text-decoration:none\">\n   <v-btn \n        class=\"ml-10 mt-7\"\n        fab\n      >\n      <v-icon>\n        mdi-arrow-left\n      </v-icon>\n      </v-btn>\n      </router-link>\n     <v-btn\n      dark\n      small\n      color=\"primary\"\n      elevation=\"2\"\n      class=\"mt-8 ml-8 pa-5\"\n      @click=\"dialogAdd = true\"\n\n    >\n     <v-icon\n        class=\"mr-2\"\n        small\n        color=\"secondary\"\n      >\n        fa-add\n      </v-icon>\n      <span class=\"add\">\n      Dodaj fotografije\n      </span>\n      </v-btn>\n      <v-btn\n      dark\n      small\n      color=\"red\"\n      elevation=\"2\"\n      class=\"mt-8 ml-8 pa-5\"\n      @click=\"dialogDeleteAll = true\"\n\n    >\n     <v-icon\n        class=\"mr-2\"\n        small\n      >\n        fa-trash\n      </v-icon>\n      <span class=\"add\">\n      Obriši sve fotografije\n      </span>\n      </v-btn>\n       <v-btn \n        class=\"ml-10 mt-9\"\n      ><h1>{{this.wedName}}</h1></v-btn>\n\n       <v-container  style=\"width:80%\" class=\"mt-12\">\n      <v-layout justify-center  row wrap>\n        <v-flex\n         class=\"mx-auto\"\n         v-for=\"item in this.images\"\n         :key=\"item\"\n        >\n    <v-hover v-slot=\"{ hover }\">\n\n      <v-img\n        width=\"244\"\n        :src=\"`http://localhost:3000/`+item\"\n        :lazy-src=\"`http://localhost:3000/`+item\"\n        aspect-ratio=\"1\"\n        class=\"grey lighten-2 mb-auto mx-auto mt-9\"\n      >\n          <template v-slot:placeholder>\n            <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\">\n              <v-progress-circular\n                indeterminate\n                color=\"grey lighten-5\"\n              ></v-progress-circular>\n            </v-row>\n          </template>\n           <v-expand-transition>\n          <div\n            v-if=\"hover\"\n            class=\"d-flex transition-fast-in-fast-out black  v-card--reveal text-h2 white--text\"\n            style=\"height: 100%;\"\n          >\n           <v-btn\n           id=\"op1\"\n      class=\"mr-2\"\n      dark\n      small\n      color=\"white\"\n      elevation=\"2\"\n      fab\n      @click=\"editItem(item._id, item)\"\n\n    >\n     <v-icon\n        \n        small\n        color=\"black\"\n      >\n        fa-pen-to-square\n      </v-icon>\n      </v-btn>\n\n     <v-btn\n      dark\n      small\n      color=\"red\"\n      elevation=\"2\"\n      fab\n      @click=\"deleteItem(item)\"\n\n    >\n     <v-icon\n        \n        small\n      >\n        fa-trash\n      </v-icon>\n      </v-btn>\n        \n          </div>\n        </v-expand-transition>\n        </v-img>\n         </v-hover>\n        </v-flex>\n      </v-layout>\n       </v-container>\n\n    <v-dialog\n        v-model=\"dialog\"\n        width=\"500\"\n      >\n        <v-card>\n          <v-card-title>\n            Brisanje fotografije\n          </v-card-title>\n          <v-card-text>\n            Da li ste sigurni da želite da obrišete ovu fotografiju?\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"info\"\n              text\n              @click=\"dialog=false\"\n            >\n            <v-icon >mdi-close-circle</v-icon>\n              Odustani\n            </v-btn>\n            <v-btn\n              color=\"red\"\n              text\n              @click=\"deleteFotografija(item)\"\n            >\n            <v-icon>mdi-delete</v-icon>\n              Obriši\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n             <v-dialog\n        v-model=\"dialogEdit\"\n        width=\"500\"\n      >\n        <v-card>\n          <v-card-title>\n            Izmena fotografije\n          </v-card-title>\n          <v-card-text>\n          <v-form \n        ref=\"form\" \n        @submit.prevent=\"editFotografija\"\n        > \n   <v-file-input\n    placeholder=\"Fotografije\"\n    prepend-icon=\"mdi-camera\"\n    accept=\"image/*\" \n    label=\"Izaberite fotografiju\"\n    v-model=\"image\" \n\n  ></v-file-input>\n  </v-form>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"info\"\n              text\n              @click=\"dialogEdit=false\"\n            >\n            <v-icon >mdi-close-circle</v-icon>\n\n              Odustani\n            </v-btn>\n            <v-btn\n              color=\"green\"\n              text\n              @click=\"editFotografija(id, item)\"\n            >\n             <v-icon >mdi-content-save</v-icon>\n\n              Izmeni\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n        <v-dialog\n        v-model=\"dialogAdd\"\n        width=\"500\"\n      >\n        <v-card>\n          <v-card-title>\n            Dodaj fotografije\n          </v-card-title>\n          <v-card-text>\n          <v-form \n        ref=\"form\" \n        @submit.prevent=\"dodajFotografiju\"\n        > \n   <v-file-input\n    prepend-icon=\"mdi-camera\"\n    accept=\"image/*\" \n    label=\"Izaberite fotografije\"\n    v-model=\"imageAdd\" \n    ref=\"uploadFiles\"\n    multiple color=\"pink\"\n\n  ></v-file-input>\n  </v-form>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"info\"\n              text\n              @click=\"dialogAdd=false\"\n            >\n            <v-icon >mdi-close-circle</v-icon>\n\n              Odustani\n            </v-btn>\n            <v-btn\n              color=\"green\"\n              text\n              :loading=\"loading\"\n              @click=\"dodajFotografiju()\"\n            >\n            <v-icon >mdi-content-save</v-icon>\n\n              Dodaj\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        v-model=\"dialogDeleteAll\"\n        width=\"500\"\n      >\n        <v-card>\n          <v-card-title>\n            Obrišite sve fotografije\n          </v-card-title>\n          <v-card-text>\n            <span class=\"er\">\n            Da li ste sigurni da želite da obrišete sve fotografije?<br>\n            Povratak neće biti moguć!!!\n            </span>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"info\"\n              text\n              @click=\"dialogDeleteAll=false\"\n            >\n            <v-icon >mdi-close-circle</v-icon>\n              Odustani\n            </v-btn>\n            <v-btn\n              color=\"red\"\n              text\n              @click=\"deleteAllFotografija(id)\"\n            >\n            <v-icon>mdi-delete</v-icon>\n              Obriši sve\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n</div>\n \n</template>\n\n\n<script>\nimport apiPost from \"../../services/service\"\n// @ is an alias to /src\n\n  export default {\n    data: () => ({\n      search: \"\",\n      dialog: false,\n      dialogEdit: false,\n      dialogAdd: false,\n      dialogDeleteAll: false,\n      itemsPerPage: 4,\n      images: [],\n      image:[],\n      imageAdd:[],\n      tab: null,\n      loading: false,\n      id:null,\n      item:null,\n      wedName: null,\n      \n    \n    }),\n\n    async mounted () {\n      \n      this.id = await  this.$route.params.id\n      try {\n        // Simple GET request using axios\n       await apiPost.getCard(this.id).then(async response => {\n          this.images = await response.data.images\n          this.wedName = await  response.data.name\n       })\n       \n      } catch (error) {\n        console.log(error.message)\n      }\n    },\n\n    methods: {\n     async deleteFotografija(item){\n      try {\n        let formData = {\n          \"image\": item,\n          \"id\": this.id\n        }\n        await apiPost.deleteImage(formData)\n       .then(response => {\n            console.log(response.data)\n        })\n      await apiPost.getCard(this.id).then(async response => {\n          this.images = await response.data.images\n       })\n       this.dialog = false;\n     \n      } catch (error) {\n        console.log(error.message)\n        \n      }\n      \n       \n       \n     },\n     async deleteAllFotografija(id){\n      try {\n        await apiPost.deleteImageAll(id).then(response => {\n        console.log(response.data)\n       })\n       await apiPost.getCard(this.id)\n          .then(async response => {\n             this.images   = await response.data.images\n             \n          })\n      } catch (error) {\n        console.log(error.message)\n        \n      }\n      this.dialogDeleteAll = false;\n     },\n     async editFotografija(id){\n      try {\n        let formData = new FormData();\n           if (this.image) {\n          formData.append(\"image[]\", this.image);\n          console.log(formData)\n          console.log(this.image)\n          await apiPost.editImage(id,this.item,formData)\n          .then(response => {\n            console.log(response.data)\n          })\n          await apiPost.getCard(this.id).then(async response => {\n          this.images = await response.data.images\n          this.dialogEdit = false;\n\n       })\n          this.image = []\n          this.item = null\n      }\n      } catch (error) {\n        console.log(error.message)\n      }       \n     },\n      deleteItem(item) {\n      this.item = item\n      this.dialog = true\n    },\n     editItem(id, item) {\n\n      this.dialogEdit = true\n      this.item = item\n    },\n  \n    async dodajFotografiju(){\n      \n       this.loading = true;\n       let formData = new FormData()\n       try {\n          let files = this.imageAdd\n          let filesLength = files.length\n          for(var i = 0; i < filesLength; i++){\n            formData.append(\"image[]\", files[i])\n          \n          }\n            formData.append(\"id\", this.id)\n\n          if (this.imageAdd) {\n          await apiPost.addImages(formData)\n          .then(async response => {\n            console.log(await response.data)\n          })\n          await apiPost.getCard(this.id)\n          .then(async response => {\n             this.images   = await response.data.images\n             \n          })\n          this.dialogAdd = false;\n          this.imageAdd = []\n          this.loading = false;\n       }\n        \n       } catch (error) {\n        console.log(error.message)\n       }\n         \n     }\n       ,\n     reserve () {\n        this.loading = true\n        setTimeout(() => (this.loading = false), 2000)\n      },\n     \n\n     \n    },\n  }\n</script>\n\n\n\n\n<style scoped>\n  .bottom-gradient {\n    background-image: linear-gradient(to top, rgba(0, 0, 0, 0.4) 0%, transparent 72px);\n  }\n\n  .repeating-gradient {\n    background-image: repeating-linear-gradient(-45deg,\n                        rgba(255,0,0,.25),\n                        rgba(255,0,0,.25) 5px,\n                        rgba(0,0,255,.25) 5px,\n                        rgba(0,0,255,.25) 10px\n                      );\n  }\n  .v-card--reveal {\n  align-items: center;\n  bottom: 0;\n  justify-content: center;\n  opacity: .9;\n  position: absolute;\n  width: 100%;\n}\n.add{\n  font-size: 15px;\n}\n.er{\n  font-size: 15px ;\n}\n</style>"]},"metadata":{},"sourceType":"module"}